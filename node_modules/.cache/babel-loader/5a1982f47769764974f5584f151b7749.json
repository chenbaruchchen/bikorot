{"ast":null,"code":"import{Edit,Check}from\"react-feather\";import{useState,useEffect}from\"react\";import ReactStars from\"react-rating-stars-component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(props){let index=-1;let listSubject=props.bikoretKind.map(subject=>/*#__PURE__*/_jsx(Subject,{index:index++,rows:props.rows,bikoretKind:props.bikoretKind,subject:subject}));return/*#__PURE__*/_jsxs(\"div\",{style:main,children:[\"edit\",listSubject]});}const main={width:\"80%\",minHeight:\"100vh\",display:\"flex\",flexDirection:\"column\",justifyContent:\"flex-start\",alignItems:\"center\",boxShadow:\"1px 1px 2px 0px rgba(0, 0, 0, 0.25)\",overflow:\"visible\",borderRadius:17};const subjectStyle={flexShrink:0,width:\"100%\",height:108,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-evenly\",alignItems:\"center\",overflow:\"visible\"};function Subject(props){//\nconst[editMode,setEditMode]=useState(false);const[currentUpdate,setCurrentUpdate]=useState(getFirstRate());// updateRate(props.bikoretKind, props.subject);\n// useEffect(()=>{\n//   let value=getFirstRate()\n//   console.log(value)\n//   console.log(props.index)\n//    },[])\nfunction getFirstRate(){let amount=0;for(let index=0;index<=props.index;index++){amount=amount+props.bikoretKind[index].list.length;}let value=props.rows[amount]._rawData[2];let bikoretKind=props.bikoretKind;let subjectToFound=props.subjectToFound;let i=0;var found={start:i,length:bikoretKind[0].list.length};bikoretKind.forEach(subject=>{if(subject===subjectToFound){found={start:i,length:subject.list.length};}i=i+subject.list.length-1;i++;});console.log(parseInt(value));return parseInt(value);// return props.rows[found.start]._rawData[2];\n}function updateRate(bikoretKind,subjectToFound){console.log(\"found\");let i=0;let found;bikoretKind.forEach(subject=>{if(subject===subjectToFound){found={start:i,length:subject.list.length};}i=i+subject.list.length-1;i++;});console.log(currentUpdate);console.log(found);for(let i=0;i<found.length;i++){props.rows[found.start+i]._rawData[2]=currentUpdate;props.rows[found.start+i].save().then(res=>{console.log(props.rows[found.start+i]._rawData.rate);}).catch(error=>{console.error(\"onRejected function called: \"+error);});}// props.rows[start].save().then(() => {\n// alert(\"בוצע \");\n//    function update() {\n//   props.row.rate = props.values.rate; // update a value\n//   props.row.found = props.values.found; // update a value\n//   props.row.details = props.values.details; // update a value\n//   props.row.save().then(() => {\n//     alert(\"בוצע \");\n//   });\n// }\n}return/*#__PURE__*/_jsxs(\"div\",{style:subjectStyle,children:[/*#__PURE__*/_jsxs(\"div\",{style:{visibility:editMode?\"visible\":\"hidden\"},children:[\" \",/*#__PURE__*/_jsx(Check,{onClick:()=>{updateRate(props.bikoretKind,props.subject);setEditMode(false);}}),/*#__PURE__*/_jsx(ReactStars,{value:currentUpdate,count:6// onChange={\n//   (e) => {\n//     ratingChanged(e, props.quatsion.index);\n//   }\n// ratingChanged,\n// setRateById(rate, props.id)\n// }\n,onChange:e=>{setCurrentUpdate(e);},size:24,activeColor:\"#ffd700\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{visibility:editMode?\"hidden\":\"visible\"},children:[\" \",/*#__PURE__*/_jsx(Edit,{onClick:()=>setEditMode(true)}),/*#__PURE__*/_jsx(\"h5\",{style:{visibility:editMode?\"hidden\":\"visible\"},children:props.subject.name})]})]});}","map":{"version":3,"sources":["C:/Users/chenb/Downloads/react/src/components/Watch/Sheet/EditRate/EditRate.js"],"names":["Edit","Check","useState","useEffect","ReactStars","App","props","index","listSubject","bikoretKind","map","subject","rows","main","width","minHeight","display","flexDirection","justifyContent","alignItems","boxShadow","overflow","borderRadius","subjectStyle","flexShrink","height","Subject","editMode","setEditMode","currentUpdate","setCurrentUpdate","getFirstRate","amount","list","length","value","_rawData","subjectToFound","i","found","start","forEach","console","log","parseInt","updateRate","save","then","res","rate","catch","error","visibility","e","name"],"mappings":"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","sourcesContent":["import { Edit, Check } from \"react-feather\";\r\nimport { useState, useEffect } from \"react\";\r\nimport ReactStars from \"react-rating-stars-component\";\r\n\r\nexport default function App(props) {\r\n  let index = -1;\r\n  let listSubject = props.bikoretKind.map((subject) => (\r\n    <Subject\r\n      index={index++}\r\n      rows={props.rows}\r\n      bikoretKind={props.bikoretKind}\r\n      subject={subject}\r\n    />\r\n  ));\r\n  return (\r\n    <div style={main}>\r\n      edit\r\n      {listSubject}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst main = {\r\n  width: \"80%\",\r\n  minHeight: \"100vh\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  justifyContent: \"flex-start\",\r\n  alignItems: \"center\",\r\n  boxShadow: \"1px 1px 2px 0px rgba(0, 0, 0, 0.25)\",\r\n  overflow: \"visible\",\r\n\r\n  borderRadius: 17\r\n};\r\n\r\nconst subjectStyle = {\r\n  flexShrink: 0,\r\n  width: \"100%\",\r\n  height: 108,\r\n  display: \"flex\",\r\n  flexDirection: \"row\",\r\n  justifyContent: \"space-evenly\",\r\n  alignItems: \"center\",\r\n  overflow: \"visible\"\r\n};\r\nfunction Subject(props) {\r\n  //\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [currentUpdate, setCurrentUpdate] = useState(getFirstRate());\r\n  // updateRate(props.bikoretKind, props.subject);\r\n  // useEffect(()=>{\r\n  //   let value=getFirstRate()\r\n  //   console.log(value)\r\n  //   console.log(props.index)\r\n  //    },[])\r\n  function getFirstRate() {\r\n    let amount = 0;\r\n    for (let index = 0; index <= props.index; index++) {\r\n      amount = amount + props.bikoretKind[index].list.length;\r\n    }\r\n    let value = props.rows[amount]._rawData[2];\r\n\r\n    let bikoretKind = props.bikoretKind;\r\n    let subjectToFound = props.subjectToFound;\r\n    let i = 0;\r\n    var found = {\r\n      start: i,\r\n      length: bikoretKind[0].list.length\r\n    };\r\n    bikoretKind.forEach((subject) => {\r\n      if (subject === subjectToFound) {\r\n        found = {\r\n          start: i,\r\n          length: subject.list.length\r\n        };\r\n      }\r\n      i = i + subject.list.length - 1;\r\n      i++;\r\n    });\r\n    console.log(parseInt(value));\r\n    return parseInt(value);\r\n    // return props.rows[found.start]._rawData[2];\r\n  }\r\n\r\n  function updateRate(bikoretKind, subjectToFound) {\r\n    console.log(\"found\");\r\n    let i = 0;\r\n    let found;\r\n    bikoretKind.forEach((subject) => {\r\n      if (subject === subjectToFound) {\r\n        found = {\r\n          start: i,\r\n          length: subject.list.length\r\n        };\r\n      }\r\n      i = i + subject.list.length - 1;\r\n      i++;\r\n    });\r\n    console.log(currentUpdate);\r\n    console.log(found);\r\n\r\n    for (let i = 0; i < found.length; i++) {\r\n      props.rows[found.start + i]._rawData[2] = currentUpdate;\r\n      props.rows[found.start + i]\r\n        .save()\r\n        .then((res) => {\r\n          console.log(props.rows[found.start + i]._rawData.rate);\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"onRejected function called: \" + error);\r\n        });\r\n    }\r\n    // props.rows[start].save().then(() => {\r\n    // alert(\"בוצע \");\r\n\r\n    //    function update() {\r\n    //   props.row.rate = props.values.rate; // update a value\r\n    //   props.row.found = props.values.found; // update a value\r\n\r\n    //   props.row.details = props.values.details; // update a value\r\n    //   props.row.save().then(() => {\r\n    //     alert(\"בוצע \");\r\n    //   });\r\n    // }\r\n  }\r\n  return (\r\n    <div style={subjectStyle}>\r\n      <div style={{ visibility: editMode ? \"visible\" : \"hidden\" }}>\r\n        {\" \"}\r\n        <Check\r\n          onClick={() => {\r\n            updateRate(props.bikoretKind, props.subject);\r\n            setEditMode(false);\r\n          }}\r\n        />\r\n        <ReactStars\r\n          value={currentUpdate}\r\n          count={6}\r\n          // onChange={\r\n          //   (e) => {\r\n          //     ratingChanged(e, props.quatsion.index);\r\n          //   }\r\n          // ratingChanged,\r\n\r\n          // setRateById(rate, props.id)\r\n          // }\r\n\r\n          onChange={(e) => {\r\n            setCurrentUpdate(e);\r\n          }}\r\n          size={24}\r\n          activeColor=\"#ffd700\"\r\n        />\r\n      </div>\r\n      <div style={{ visibility: editMode ? \"hidden\" : \"visible\" }}>\r\n        {\" \"}\r\n        <Edit onClick={() => setEditMode(true)} />\r\n        <h5 style={{ visibility: editMode ? \"hidden\" : \"visible\" }}>\r\n          {props.subject.name}\r\n        </h5>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}